

<!doctype html>
<html id="html" lang="en">

<!-- Mirrored from polygonscan.com/code-reader by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 25 May 2024 16:24:03 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><title>
	Code Reader | PolygonScan
</title><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" /><meta name="format-detection" content="telephone=no" />
<link rel="shortcut icon" href="https://polygonscan.com/assets/generic/html/favicon.ico" />
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QD3P95KD1C"></script>
<script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config','G-QD3P95KD1C', { 'anonymize_ip': true });
    </script>
<script>
        //Search box text ad
        var availableAd = [];
        var gotAd = [];

        
        availableAd = ["<div class='p-2'><a href='https://moonpay-affiliate-program.sjv.io/jrADLv' rel='nofollow' target='_blank' data-bs-toggle='tooltip' data-bs-trigger='hover' title='Links to an External Advertiser site' class='search-panel-ads d-flex align-items-center p-2 rounded'><div class='me-2'><img width='22' class='rounded-1' src='/images/gen/moonpay_20.png' alt='Ads'></div><div class='text-truncate'><h6 class='d-flex align-items-center fs-sm text-dark mb-0'><div class='text-truncate me-2'>MoonPay: Buy & Sell Crypto with a credit card.</div><span class='d-none d-sm-inline-block small bg-white text-muted rounded-1 border px-2 py-1 ms-1'>Sponsored</span><span class='d-inline-block d-sm-none small bg-white text-muted rounded-1 border px-2 py-1 ms-1'>Ad</span></h6></div></a></div>", "<div class='p-2'><a href='https://goto.etherscan.com/rd/2GZADEKDKMDRGQ3EPURRZDNQA' rel='nofollow' target='_blank' data-bs-toggle='tooltip' data-bs-trigger='hover' title='Links to an External Advertiser site' class='search-panel-ads d-flex align-items-center p-2 rounded'><div class='me-2'><img width='22' class='rounded-1' src='/images/gen/blockdag_20.png' alt='Ads'></div><div class='text-truncate'><h6 class='d-flex align-items-center fs-sm text-dark mb-0'><div class='text-truncate me-2'>BlockDAG: Layer 1 Presale is LIVE! Watch Keynote.</div><span class='d-none d-sm-inline-block small bg-white text-muted rounded-1 border px-2 py-1 ms-1'>Sponsored</span><span class='d-inline-block d-sm-none small bg-white text-muted rounded-1 border px-2 py-1 ms-1'>Ad</span></h6></div></a></div>", "<div class='p-2'><a href='https://goto.etherscan.com/rd/5SH8VGKZCD7YNKI3VSFIZ4RG3' rel='nofollow' target='_blank' data-bs-toggle='tooltip' data-bs-trigger='hover' title='Links to an External Advertiser site' class='search-panel-ads d-flex align-items-center p-2 rounded'><div class='me-2'><img width='22' class='rounded-1' src='/images/gen/etoro_20.png' alt='eToro'></div><div class='text-truncate'><h6 class='d-flex align-items-center fs-sm text-dark mb-0'><div class='text-truncate me-2'>eToro - 100+ cryptoassets</div><span class='d-none d-sm-inline-block small bg-white text-muted rounded-1 border px-2 py-1 ms-1'>Sponsored</span><span class='d-inline-block d-sm-none small bg-white text-muted rounded-1 border px-2 py-1 ms-1'>Ad</span></h6></div></a></div>"];
        gotAd = ["ShowAds					"];
        
    </script>

<link rel="preconnect" href="https://fonts.googleapis.com/" /><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin /><link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&amp;display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://polygonscan.com/assets/vendor/font-awesome/css/all.min.css?v=24.5.3.0">
<link rel="stylesheet" href="https://polygonscan.com/assets/vendor/autocomplete/dist/css/autocomplete.min.css?v=24.5.3.0" />
<link rel="stylesheet" href="https://polygonscan.com/assets/css/theme.min.css?v=24.5.3.0">
<link rel="stylesheet" href="https://polygonscan.com/assets/poly/css/polygonscan.min.css?v=24.5.3.0">
<link rel="stylesheet" href="https://polygonscan.com/assets/css/custom.css?v=24.5.3.0">
<script src="https://polygonscan.com/assets/vendor/jquery/dist/jquery.min.js?v=24.5.3.0"></script>
<script type="text/javascript" src="https://polygonscan.com/jss/blockies.js?v=24.5.3.0"></script>
<script type="text/javascript" src="https://polygonscan.com/assets/js/theme-appearance.js?v=24.5.3.0"></script>
<style>
        .autolink-safari a {
            pointer-events: none !important;
            text-decoration: none !important;
            color: inherit !important;
        }

        #masterNoticeBar div.alert a{
            color:#fff !important; 
            text-decoration: underline !important;
        }
    </style>
<style> .dgcu9wxud8d { -ms-flex-pack: center; justify-content: center; } .azknkksiq55 { border-top: 1px solid #e7eaf3 !important; } body.dark-mode .azknkksiq55 { border-color: #18365b !important; } @media (min-width: 992px) { .bmcmbcfqfhx { display: block !important; } } @media (min-width: 992px) { .cuxrrjdi9cg { display: inline-block !important; } }  </style>
<meta name="description" content="Generate instant answers for your smart contract questions using OpenAI." /></head>
<body id="body" class="d-flex flex-column min-vh-100">
<section id="masterNoticeBar">


</section>

<section id="masterTopBar" class="sticky-top bg-white border-bottom py-2 d-print-none">
<div class="container-xxl d-flex align-items-center justify-content-between">
<div id="ethPrice" class="d-none d-md-flex align-items-center gap-4 w-100 fs-sm">
<div class="text-muted"><span class="text-muted">MATIC Price:</span> <a href="https://polygonscan.com/chart/maticprice">$0.725206</a><span data-bs-toggle="tooltip" data-bs-placement="top" title="Changes in the last 24 hours"><span class="text-success"> (+1.13%)</span></span></div><div class="text-muted d-none d-lg-block"><i class="fad fa-gas-pump me-1"></i> Gas: <span id="spanGasTooltip" data-bs-toggle="tooltip" data-bs-html="true"><a href="https://polygonscan.com/gastracker"><span class="gasPricePlaceHolder">30</span> GWei</a></span></div>
</div>
<div class="d-flex justify-content-end align-items-center gap-2 w-100">
<div id="frmMaster" class="search-panel-container flex-grow-1 position-relative" style="width: 30rem;">
<form action="https://polygonscan.com/search" method="GET" autocomplete="off" spellcheck="false" class="auto-search-max-height">
<span class="d-flex align-items-center position-absolute top-0 bottom-0" title="Search" style="left: 0.75rem;">
<i class="fa-regular fa-search fs-5 text-secondary"></i>
</span>
<input type="text" class="form-control form-control-lg bg-light bg-focus-white pe-20" autocomplete="off" spellcheck="false" id="search-panel" name="q" placeholder="Search by Address / Txn Hash / Block / Token / Domain Name" aria-describedby="button-header-search" onkeyup="handleSearchText(this);" maxlength="68" style="padding-left: 2.375rem;" />
<a href="javascript:;" class="clear-icon d-none align-items-center position-absolute top-0 bottom-0 my-auto d-flex align-items-center" style="right: 3.375rem; cursor:pointer;">
<i class="fa-regular fa-xmark fs-5 text-secondary"></i>
</a>
<a href="javascript:;" class="search-icon d-none btn btn-sm btn-white my-1.5 align-items-center position-absolute top-0 bottom-0 d-flex align-items-center" style="right: 0.75rem; cursor:pointer;">
<i class="fa-regular fa-arrow-turn-down-left text-secondary"></i>
</a>
<input type="hidden" value id="hdnSearchText" />
<input type="hidden" value id="hdnSearchLabel" />
<input id="hdnIsTestNet" value="False" type="hidden" />
<span class="shortcut-slash-icon align-items-center position-absolute top-0 bottom-0 align-items-center d-none d-sm-flex" title="Search" style="right: 0.5rem;">
<kbd class="bg-dark bg-opacity-25 fw-semibold px-2 py-0.5 text-white">/</kbd>
</span>
</form>
</div>
<div id="divThemeSetting" class="dropdown d-none d-lg-block">
<button class="btn btn-lg btn-white text-primary content-center" type="button" id="dropdownMenuTopbarSettings" data-bs-auto-close="outside" data-bs-toggle="dropdown" aria-expanded="false" style="width: 2.375rem; height: 2.375rem;">
<span class="theme-btn-main"><i class="far fa-sun-bright theme-icon-active" data-href="#fa-sun-bright"></i></span>
</button>
<ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuTopbarSettings">
<li>
<button type="button" class="dropdown-item theme-btn active" data-bs-theme-value="light" onclick="setThemeMode('light');">
<i class="far fa-sun-bright fa-fw dropdown-item-icon theme-icon me-1" data-href="#fa-sun-bright"></i> Light
</button>
</li>
<li>
<button type="button" class="dropdown-item theme-btn" data-bs-theme-value="dim" onclick="setThemeMode('dim');">
<i class="far fa-moon-stars fa-fw dropdown-item-icon theme-icon me-1" data-href="#fa-moon-stars"></i> Dim
</button>
</li>
<li>
<button type="button" class="dropdown-item theme-btn" data-bs-theme-value="dark" onclick="setThemeMode('dark');">
<i class="far fa-moon fa-fw dropdown-item-icon theme-icon me-1" data-href="#fa-moon"></i> Dark
</button>
</li>
<li>
<hr class="dropdown-divider">
</li>
<li>
<a class="dropdown-item" href="https://polygonscan.com/settings">
<i class="far fa-gear fa-fw dropdown-item-icon me-1"></i> Site Settings <i class="far fa-arrow-right ms-1"></i>
</a>
</li>
</ul>
</div>
<div id="divTestNet" class="dropdown d-none d-lg-block">
<button class="btn btn-lg btn-white content-center p-0" type="button" id="dropdownTopbarNetworks" data-bs-toggle="dropdown" aria-expanded="false" style="width: 2.375rem; height: 2.375rem;">
<img width="18" data-img-theme="light" src="https://polygonscan.com/assets/poly/images/svg/logos/chain-light.svg?v=24.5.3.0" alt="Polygon PoS Chain Logo">
<img width="18" data-img-theme="dim" src="https://polygonscan.com/assets/poly/images/svg/logos/chain-dim.svg?v=24.5.3.0" alt="Polygon PoS Chain Logo">
<img width="18" data-img-theme="dark" src="https://polygonscan.com/assets/poly/images/svg/logos/chain-dark.svg?v=24.5.3.0" alt="Polygon PoS Chain Logo">
</button>
<ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownTopbarNetworks">
<li><a class="dropdown-item active" href="https://polygonscan.com/">Polygon Mainnet</a></li><li><a class="dropdown-item" href="https://zkevm.polygonscan.com/">zkEVM Mainnet</a></li>
<li>
<hr class="dropdown-divider">
</li>
<li><a class="dropdown-item" href="https://amoy.polygonscan.com/">Amoy Testnet</a></li><li><a class="dropdown-item" href="https://cardona-zkevm.polygonscan.com/">Cardona Testnet</a></li>
</ul>
</div>
</div>
</div>
</section>


<header id="masterHeader" class="header border-bottom d-print-none">
<nav class="navbar navbar-expand-lg navbar-light py-3 py-lg-0">
<div class="container-xxl position-relative">
<a class="navbar-brand" href="https://polygonscan.com/" target="_parent" aria-label="PolygonScan">
<img width="160" data-img-theme="light" src="https://polygonscan.com/assets/poly/images/svg/logos/logo-light.svg?v=24.5.3.0" alt="PolygonScan Logo">
<img width="160" data-img-theme="dim" src="https://polygonscan.com/assets/poly/images/svg/logos/logo-dim.svg?v=24.5.3.0" alt="PolygonScan Logo">
<img width="160" data-img-theme="dark" src="https://polygonscan.com/assets/poly/images/svg/logos/logo-dark.svg?v=24.5.3.0" alt="PolygonScan Logo">
</a>
<div class="d-flex align-items-center gap-4">
<a class="link-dark d-block d-lg-none" href="https://polygonscan.com/login">
<i class="far fa-user-circle me-1"></i> Sign In
</a>
<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
<span class="navbar-toggler-icon"></span>
</button>
</div>
<div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
<ul class="navbar-nav gap-1 gap-lg-0 pt-4 pt-lg-0">
<li class="nav-item">
<a href="https://polygonscan.com/" id="LI_default" class="nav-link" aria-current="page">
Home
</a>
</li>

<li class="nav-item dropdown">
<a href="javascript:;" id="LI_blockchain" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">Blockchain</a>
<ul class="dropdown-menu dropdown-menu-border" style="min-width: 14rem;">
<li>
<a href="https://polygonscan.com/txs" id="LI12" class="dropdown-item">
Transactions
</a>
</li>
<li>
<a href="https://polygonscan.com/txsPending" id="LI16" class="dropdown-item">
Pending Transactions
</a>
</li>
<li>
<a href="https://polygonscan.com/txsInternal" id="LI14" class="dropdown-item">
Contract Internal Transactions
</a>
</li>
<li>
<a href="https://polygonscan.com/txnbridge" id="LI77" class="dropdown-item">
Plasma Deposit Transactions
</a>
</li>
<li>
<hr class="dropdown-divider">
</li>
<li>
<a href="https://polygonscan.com/blocks" id="LI_blocks" class="dropdown-item">
View Blocks
</a>
</li>
<li>
<a href="https://polygonscan.com/blocks_forked" id="LI_blocks2" class="dropdown-item">
Forked Blocks (Reorgs)
</a>
</li>
<li>
<hr class="dropdown-divider">
</li>
<li>
<a href="https://polygonscan.com/accounts" id="LI_accountall" class="dropdown-item">
Top Accounts
</a>
</li>
<li>
<a href="https://polygonscan.com/contractsVerified" id="LI_contract_verified" class="dropdown-item">
Verified Contracts
</a>
</li>
</ul>
</li>


<li class="nav-item dropdown">
<a href="javascript:;" id="LI_tokens" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">Tokens</a>
<ul class="dropdown-menu dropdown-menu-border" style="min-width: 14rem;">
<li>
<a href="https://polygonscan.com/tokens" id="LI21" class="dropdown-item">
Top Tokens <span class="small text-muted">(ERC-20)</span>
</a>
</li>
<li>
<a href="https://polygonscan.com/tokentxns" id="LI1" class="dropdown-item">
Token Transfers <span class="small text-muted">(ERC-20)</span>
</a>
</li>
</ul>
</li>


<li class="nav-item dropdown">
<a href="javascript:;" id="LI_Nfts" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">NFTs</a>
<ul class="dropdown-menu dropdown-menu-border" style="min-width: 14rem;">
<li>
<a href="https://polygonscan.com/nft-top-contracts" id="LI63" class="dropdown-item">
Top NFTs
</a>
</li>
<li>
<a href="https://polygonscan.com/nft-top-mints" id="LI67" class="dropdown-item">
Top Mints
</a>
</li>
<li>
<a href="https://polygonscan.com/nft-trades" id="LI64" class="dropdown-item">
Latest Trades
</a>
</li>
<li>
<a href="https://polygonscan.com/nft-transfers" id="LI65" class="dropdown-item">
Latest Transfers
</a>
</li>
<li>
<a href="https://polygonscan.com/nft-latest-mints" id="LI66" class="dropdown-item">
Latest Mints
</a>
</li>
</ul>
</li>


<li class="nav-item dropdown">
<a href="javascript:;" id="LI_resources" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">Resources</a>
<ul class="dropdown-menu dropdown-menu-border" style="min-width: 14rem;">
<li>
<a href="https://polygonscan.com/charts" id="LI_charts2" class="dropdown-item">
Charts &amp; Stats
</a>
</li>
<li>
<a href="https://polygonscan.com/topstat" id="LI_topstat" class="dropdown-item">
Top Statistics
</a>
</li>
</ul>
</li>


<li class="nav-item dropdown">
<a href="#" id="li_developers" class="nav-link dropdown-toggle active" role="button" data-bs-toggle="dropdown" aria-expanded="false">Developers</a>
<ul class="dropdown-menu dropdown-menu-border" style="min-width: 14rem;">
<li>
<a href="https://polygonscan.com/apis" id="LI5" class="dropdown-item">
API Plans
</a>
</li>
<li>
<a href="https://docs.polygonscan.com/" id="LI6" class="dropdown-item" target="_blank">
API Documentation
</a>
</li>
<li>
<hr class="dropdown-divider">
</li>
<li>
<a href="https://polygonscan.com/code-reader" id="A1" class="dropdown-item active">
Code Reader <span class="badge border bg-light text-muted">Beta</span>
</a>
</li>
<li>
<a href="https://polygonscan.com/verifyContract" id="LI17" class="dropdown-item">
Verify Contract
</a>
</li>
<li>
<a href="https://polygonscan.com/find-similar-contracts" id="LI55" class="dropdown-item">
Similar Contract Search
</a>
</li>
<li>
<a href="https://polygonscan.com/contractdiffchecker" id="LI54" class="dropdown-item">
Contract Diff Checker
</a>
</li>
<li>
<hr class="dropdown-divider">
</li>
<li>
<a href="https://polygonscan.com/vyper" id="LI27" class="dropdown-item">
Vyper Online Compiler
</a>
</li>
<li>
<a href="https://polygonscan.com/opcode-tool" id="LI24" class="dropdown-item">
Bytecode to Opcode
</a>
</li>
<li>
<a href="https://polygonscan.com/pushTx" id="LI10" class="dropdown-item">
Broadcast Transaction
</a>
</li>
</ul>
</li>


<li class="nav-item dropdown position-initial">
<a href="javascript:;" id="LI_services2" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">More</a>
<div class="dropdown-menu dropdown-menu-border dropdown-menu-mega">
<div class="row">
<div class="col-lg order-last order-lg-first">
<div class="d-flex flex-column bg-light h-100 rounded-3 p-5">
<div>
<h6>Tools &amp; Services</h6>
<p>Discover more of PolygonScan's tools and services in one place.</p>
</div>
</div>
</div>
<div class="col-sm py-5">
<h6 class="px-3 mb-3">Tools</h6>
<ul class="list-unstyled">
<li>
<a href="https://polygonscan.com/unitconverter" id="LI50" class="dropdown-item">
<i class="far fa-arrows-rotate dropdown-item-icon fa-fw me-1"></i>Unit Converter
</a>
</li>
<li>
<a href="https://polygonscan.com/exportData" id="LI51" class="dropdown-item">
<i class="far fa-download fa-fw me-1"></i>CSV Export
</a>
</li>
<li>
<a href="https://polygonscan.com/balancecheck-tool" id="LI52" class="dropdown-item">
<i class="far fa-file-invoice-dollar fa-fw me-1"></i>Account Balance Checker
</a>
</li>
</ul>
</div>
<div class="col-sm py-5">
<h6 class="px-3 mb-3">Explore</h6>
<ul class="list-unstyled">
<li>
<a href="https://polygonscan.com/gastracker" id="LI19" class="dropdown-item">
<i class="far fa-gas-pump dropdown-item-icon fa-fw me-1"></i>Gas Tracker
</a>
</li>
<li>
<a href="https://polygonscan.com/dex" id="LI4" class="dropdown-item">
<i class="far fa-arrow-right-arrow-left dropdown-item-icon fa-fw me-1"></i>DEX Tracker
</a>
</li>
<li>
<a href="https://polygonscan.com/nodetracker" id="LI46" class="dropdown-item">
<i class="far fa-server dropdown-item-icon fa-fw me-1"></i>Node Tracker
</a>
</li>
<li>
<a href="https://polygonscan.com/labelcloud" id="LI41" class="dropdown-item">
<i class="far fa-signs-post dropdown-item-icon fa-fw me-1"></i>Label Cloud
</a>
</li>
<li>
<a href="https://polygonscan.com/name-lookup" id="LI26" class="dropdown-item">
<i class="far fa-magnifying-glass-chart dropdown-item-icon fa-fw me-1"></i>Domain Name Lookup
</a>
</li>
</ul>
</div>
<div class="col-sm py-5">
<h6 class="px-3 mb-3">Services</h6>
<ul class="list-unstyled">
<li>
<a href="https://polygonscan.com/tokenapprovalchecker" id="LI49" class="dropdown-item">
<i class="far fa-shield-keyhole dropdown-item-icon fa-fw me-1"></i>Token Approvals <span class="badge border bg-light text-muted">Beta</span>
</a>
</li>
<li>
<a href="https://polygonscan.com/verifiedSignatures" id="LI29" class="dropdown-item">
<i class="far fa-signature-lock dropdown-item-icon fa-fw me-1"></i>Verified Signature
</a>
</li>
<li>
<a href="https://polygonscan.com/advanced-filter" id="LI31" class="dropdown-item">
<i class="far fa-filters dropdown-item-icon fa-fw me-1"></i>Advanced Filter <span class="badge border bg-light text-muted">Beta</span>
</a>
</li>
</ul>
</div>
</div>
</div>
</li>

<li class="nav-item dropdown d-block d-lg-none">
<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Explorers</a>
<ul class="dropdown-menu dropdown-menu-border" style="min-width: 14rem;">
<li><a class="dropdown-item active" href="https://polygonscan.com/">Polygon Mainnet</a></li><li><a class="dropdown-item" href="https://zkevm.polygonscan.com/">zkEVM Mainnet</a></li>
<li>
<hr class="dropdown-divider">
</li>
<li><a class="dropdown-item" href="https://amoy.polygonscan.com/">Amoy Testnet</a></li><li><a class="dropdown-item" href="https://cardona-zkevm.polygonscan.com/">Cardona Testnet</a></li>
</ul>
</li>

<li class="nav-item dropdown d-block d-lg-none">
<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Appearance &amp; Settings</a>
<ul class="dropdown-menu dropdown-menu-border" style="min-width: 14rem;">
<li>
<button type="button" class="dropdown-item theme-btn active" data-bs-theme-value="light" onclick="setThemeMode('light');">
<i class="far fa-sun-bright fa-fw dropdown-item-icon theme-icon me-1" data-href="#fa-sun-bright"></i> Light
</button>
</li>
<li>
<button type="button" class="dropdown-item theme-btn" data-bs-theme-value="dim" onclick="setThemeMode('dim');">
<i class="far fa-moon-stars fa-fw dropdown-item-icon theme-icon me-1" data-href="#fa-moon-stars"></i> Dim
</button>
</li>
<li>
<button type="button" class="dropdown-item theme-btn" data-bs-theme-value="dark" onclick="setThemeMode('dark');">
<i class="far fa-moon-stars fa-fw dropdown-item-icon theme-icon me-1" data-href="#fa-moon"></i> Dark
</button>
</li>
<li>
<hr class="dropdown-divider">
</li>
<li>
<a class="dropdown-item" href="https://polygonscan.com/settings">
<i class="far fa-gear fa-fw dropdown-item-icon me-1"></i> Site Settings <i class="far fa-arrow-right ms-1"></i>
</a>
</li>
</ul>
</li>

<li class="nav-item align-self-center d-none d-lg-block">
<span class="text-secondary">|</span>
</li>
<li class="nav-item d-none d-lg-block">
<a class="nav-link" href="https://polygonscan.com/login">
<i class="far fa-user-circle me-1"></i> Sign In
</a>
</li>
</ul>
</div>
</div>
</nav>
</header>


<main id="content" class="main-content" role="main">
<input type="hidden" name="hdnAgeText" id="hdnAgeText" value="Age" />
<input type="hidden" name="hdnDateTimeText" id="hdnDateTimeText" value="Date Time (UTC)" />
<input type="hidden" name="hdnAgeTitle" id="hdnAgeTitle" value="Click to show Age Format" />
<input type="hidden" name="hdnDateTimeTitle" id="hdnDateTimeTitle" value="Click to show Datetime Format" />
<input type="hidden" name="hdnTxnText" id="hdnTxnText" value="Txn Fee" />
<input type="hidden" name="hdnGasPriceText" id="hdnGasPriceText" value="Gas Price" />
<input type="hidden" name="hdnTxnFeeTitle" id="hdnTxnFeeTitle" value="(Gas Price * Gas Used by Txns) in MATIC" />
<input type="hidden" name="hdnGasPriceTitle" id="hdnGasPriceTitle" value="Gas Price in Gwei" />
<input type="hidden" name="hdnSiteName" id="hdnSiteName" value="polygonscan" />
<input type="hidden" name="hdnSiteEmptyToken" id="hdnSiteEmptyToken" value="https://polygonscan.com/assets/poly/images/svg/empty-token.svg?v=24.5.3.0" />
<input type="hidden" name="hdnSiteShortUrl" id="hdnSiteShortUrl" value="polygonscan.com" />

<main class="main-content" role="main" style="min-height: 40rem;">
<div class="container-xxl pt-5 pb-20 h-100">
<div class="row gx-lg-8 gx-xl-12">

<aside class="col-lg-4 mb-md-2">
<h1 class="h5">Code Reader <span class="badge border bg-white fw-medium fs-sm text-dark ms-1">Beta</span>
</h1>
<p>Generate instant answers for your smart contract questions using OpenAI. <a href="https://info.polygonscan.com//code-reader/" rel="noopener" target="blank">Read more</a>.</p>
<form onsubmit="return false">

<div class="js-form-message form-group mb-4">
<label for="inputOpenAIApiKey" class="form-label">
OpenAI API Key <span class="text-danger me-2">*</span><a rel="nofollow noopener" target="blank" href="https://help.openai.com/en/articles/4936850-where-do-i-find-my-secret-api-key">Learn more</a>
</label>
<div class="position-relative">
<input type="password" class="js-toggle-password form-control py-2" name="password" id="inputOpenAIApiKey" placeholder="********" data-hs-toggle-password-options="{
                                        &quot;target&quot;: &quot;#changePassTarget&quot;,
                                        &quot;defaultClass&quot;: &quot;far fa-eye-slash&quot;,
                                        &quot;showClass&quot;: &quot;far fa-eye&quot;,
                                        &quot;classChangeTarget&quot;: &quot;#changePassIcon&quot;
                                    }">
<span class="content-center position-absolute top-0 py-1" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-title="Show/Hide OpenAI API Key" style="right: 0.3rem;">
<button type="button" class="btn btn-sm btn-ghost-white fs-70x" id="changePassTarget" tabindex="-1" style="width: 2rem; height: 2rem;">
<i id="changePassIcon" class="far fa-eye"></i>
</button>
</span>
</div>
<div class="small mt-2">
<div class="form-check form-switch">
<input class="form-check-input" type="checkbox" role="switch" id="saveKeySwitcher">
<label class="form-check-label" for="saveKeySwitcher">
Save API Key for future use <i class="far fa-question-circle text-muted" data-bs-toggle="popover" data-bs-placement="top" data-bs-trigger="hover" data-bs-content="Your API key is stored in the browser only."></i>
</label>
</div>
</div>
</div>

<div class="mb-5">
<label for="gptMode" class="form-label">Choose GPT Model</label>
<select class="form-select py-2" id="gptMode" aria-label="GPT Mode">
<option value="0" selected>GPT-3.5</option>
<option value="1">GPT-4</option>
</select>
<div class="mt-2 small text-yellow-600" id="gptModeExtra" style="display:none;">
Please ensure this API Key has access to GPT-4 Model.
</div>
</div>

<div class="mb-5">
<label class="form-label">
Examples
</label>
<div class="d-flex flex-wrap gap-2">
<a class="badge bg-white hover:bg-secondary border border-dark dark:border-white border-opacity-15 text-dark text-wrap fw-medium transition-all rounded-pill py-1.5 px-2" href="javascript:;" onclick="code_reader.exampleAction(this, '0xc2132d05d31c914a87c6611c10748aeb04b58e8f', 'What does this contract do? What is its purpose in the context of the overall smart contract?')">What does this contract do?</a>
<a class="badge bg-white hover:bg-secondary border border-dark dark:border-white border-opacity-15 text-dark text-wrap fw-medium transition-all rounded-pill py-1.5 px-2" href="javascript:;" onclick="code_reader.exampleAction(this, '0xc2132d05d31c914a87c6611c10748aeb04b58e8f', 'What are the functions available in this contract?')">What are the functions available in this contract?</a>
<a class="badge bg-white hover:bg-secondary border border-dark dark:border-white border-opacity-15 text-dark text-wrap fw-medium transition-all rounded-pill py-1.5 px-2" href="javascript:;" onclick="code_reader.exampleAction(this, '0xc2132d05d31c914a87c6611c10748aeb04b58e8f', 'How can I mint this token?')">How can I mint this token?</a>
<a class="badge bg-white hover:bg-secondary border border-dark dark:border-white border-opacity-15 text-dark text-wrap fw-medium transition-all rounded-pill py-1.5 px-2" href="javascript:;" onclick="code_reader.exampleAction(this, '0xc2132d05d31c914a87c6611c10748aeb04b58e8f', 'How does SafeMath change the state of the contract? Does it modify any state variables or emit any events?')">How does SafeMath change the contract's state</a>
</div>
</div>


<div class="mb-5">
<label class="form-label" for="loadContractAddress">Contract Address</label>
<div class="input-group mb-2">
<input type="text" class="form-control py-2" id="loadContractAddress" placeholder="0x.." aria-label="0x.." aria-describedby="Load Contract Address">
<button class="btn btn-primary py-2 px-4" type="submit" id="btnLoadContractAddress" onclick="code_reader.loadContractSourceCode(this)">Load</button>
</div>
<div class="d-flex flex-wrap align-items-center gap-1">
<span class="small text-muted">Popular:</span>
<a class="badge bg-white hover:bg-secondary border border-dark dark:border-white border-opacity-15 text-dark text-nowrap fw-medium transition-all rounded-pill py-1.5 px-2" href="javascript:;" data-value="0xc2132d05d31c914a87c6611c10748aeb04b58e8f" onclick="code_reader.choosePreContractAddress(this)">
<span class="hash-tag text-truncate" style="max-width: 8rem;">USDT</span>
</a>
<a class="badge bg-white hover:bg-secondary border border-dark dark:border-white border-opacity-15 text-dark text-nowrap fw-medium transition-all rounded-pill py-1.5 px-2" href="javascript:;" data-value="0xa5e0829caced8ffdd4de3c43696c57f7d7a678ff" onclick="code_reader.choosePreContractAddress(this)">
<span class="hash-tag text-truncate" style="max-width: 8rem;">Quickswap</span>
</a>
<a class="badge bg-white hover:bg-secondary border border-dark dark:border-white border-opacity-15 text-dark text-nowrap fw-medium transition-all rounded-pill py-1.5 px-2" href="javascript:;" data-value="0x00000000000000adc04c56bf30ac9d3c0aaf14dc" onclick="code_reader.choosePreContractAddress(this)">
<span class="hash-tag text-truncate" style="max-width: 8rem;">Seaport</span>
</a>
<a class="badge bg-white hover:bg-secondary border border-dark dark:border-white border-opacity-15 text-dark text-nowrap fw-medium transition-all rounded-pill py-1.5 px-2" href="javascript:;" data-value="0x7ceb23fd6bc0add59e62ac25578270cff1b9f619" onclick="code_reader.choosePreContractAddress(this)">
<span class="hash-tag text-truncate" style="max-width: 8rem;">WETH</span>
</a>
<a class="badge bg-white hover:bg-secondary border border-dark dark:border-white border-opacity-15 text-dark text-nowrap fw-medium transition-all rounded-pill py-1.5 px-2" href="javascript:;" data-value="0xc37d3c4326ab0e1d2b9d8b916bbdf5715f780fcf" onclick="code_reader.choosePreContractAddress(this)">
<span class="hash-tag text-truncate" style="max-width: 8rem;">UD</span>
</a>
</div>
<div id="divErrorContractSourceCode">
</div>
</div>


<div class="mb-5" style="display:none;" id="divContractName">
<label class="form-label" for="contractName">Contract Name:</label>
<a class="badge bg-secondary bg-opacity-15 border border-dark dark:border-white border-opacity-15 text-dark text-nowrap fw-medium transition-all py-1.5 px-2" href="#">
<span class="hash-tag text-truncate" id="spanContractName"></span>
</a>
</div>


<div class="mb-5" style="display:none;" id="divContractFiles">
<label class="form-label">
Choose Contract Files
<span class="badge border bg-light fw-medium text-dark rounded-pill ms-1" id="spanCountContractFiles">
</span>
</label>
<div id="divChooseContractFiles" class="list-group scrollbar-custom overflow-y-auto pe-1 me-n1" style="max-height: 12rem;">
</div>
</div>


<div style="display:none;" id="divContractSourceCode">
<label for="sourceCodeTextarea" class="form-label">
Source Code <i class="far fa-question-circle text-muted" data-bs-toggle="popover" data-bs-placement="top" data-bs-trigger="hover" data-bs-content="The AI will read through these specific lines of code."></i>
</label>
<textarea class="form-control scrollbar-custom" id="sourceCodeTextarea" rows="5" placeholder="// Contract Source Code .."></textarea>
</div>

</form>
</aside>


<div class="col-lg-8 border-lg-start">
<div style="display:none;" id="divHistory">
<div class="d-flex flex-wrap justify-content-between align-items-start mb-2">
<div></div>
<div class="d-flex align-items-center gap-2 small">
<button id="btnSavedHistory" class="btn btn-sm btn-white" onclick="getCodeReaderPromptHistory(event)">
<i class="far fa-book-open"></i>
</button>
<div class="form-check form-switch" id="divSaveHistory">
<input class="form-check-input" type="checkbox" role="switch" id="saveHistorySwitcher" disabled>
<label class="form-check-label" for="saveHistorySwitcher">
Save history
</label>
</div>
</div>
</div>
</div>
<div class="position-relative mb-3">
<label class="form-label fw-medium" for="promtBox">
<i class="far fa-sparkles text-primary me-1.5"></i>Prompt *
</label>

<textarea class="js-textarea-type-message form-control p-4" rows="1" aria-label="With textarea" placeholder="e.g. What’s a smart contract?" maxlength="500" id="txtPrompt"></textarea>


<div class="d-flex align-items-end position-absolute" style="right: 0.7rem; bottom: 0.7rem;">
<button type="submit" id="btnSubmitOpenAIApi" class="btn btn-sm btn-primary content-center" title="Send Message" style="width: 2rem; height: 2rem;" onclick="code_reader.callOpenAiApi(this)">
<i class="fa fa-paper-plane-top"></i>
</button>
</div>

</div>
<div id="divPormtAnswer" style="display:none">
<div class="card shadow-none mb-3">
<div class="card-body" id="divPormt">
&nbsp;
</div>
<div class="card-footer bg-light" id="divAnswer">
&nbsp;
</div>
</div>
<p id="divGeneratedOpenAI" style="display:none" class="text-muted small">Answers are generated by <a class="link-dark" rel="nofollow noopener" target="blank" href="https://openai.com/">OpenAI</a>.</p>
</div>
</div>

</div>
</div>
</main>


<div class="modal fade" id="disclaimerModal" tabindex="-1" data-bs-backdrop="static" aria-labelledby="disclaimerModalLabel" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-body">
<div class="text-center mb-3">
<span class="fs-1">👋</span>
<h5 class="h4 modal-title" id="disclaimerModalLabel">Before You Continue...</h5>
</div>
<ul class="list-group">
<li class="list-group-item d-flex justify-content-between align-items-center py-3">
<div class="me-3">
<span class="d-flex justify-content-center align-items-center bg-light text-dark rounded-circle fs-4" style="width: 2.5rem; height: 2.5rem;">🆕</span>
</div>
<div class="flex-grow-1 small">
Code Reader is in <b>Beta</b>. It will undergo frequent improvements.
</div>
</li>
<li class="list-group-item d-flex justify-content-between align-items-center py-3">
<div class="me-3">
<span class="d-flex justify-content-center align-items-center bg-light text-dark rounded-circle fs-4" style="width: 2.5rem; height: 2.5rem;">🔐</span>
</div>
<div class="flex-grow-1 small">You will need a valid <a href="https://help.openai.com/en/articles/4936850-where-do-i-find-my-secret-api-key" rel="nofollow noopener" target="_blank">OpenAI API Key</a> to generate prompts.</div>
</li>
<li class="list-group-item d-flex justify-content-between align-items-center py-3">
<div class="me-3">
<span class="d-flex justify-content-center align-items-center bg-light text-dark rounded-circle fs-4" style="width: 2.5rem; height: 2.5rem;">🛠️</span>
</div>
<div class="flex-grow-1 small">
PolygonScan does not store your API key on our servers.
</div>
</li>
<li class="list-group-item d-flex justify-content-between align-items-center py-3">
<div class="me-3">
<span class="d-flex justify-content-center align-items-center bg-light text-dark rounded-circle fs-4" style="width: 2.5rem; height: 2.5rem;">🙌</span>
</div>
<div class="flex-grow-1 small">Code Reader only supports <a href="https://platform.openai.com/docs/api-reference/chat/create" rel="nofollow noopener" target="_blank">Chat Completion</a> mode at the moment.</div>
</li>
<li class="list-group-item d-flex justify-content-between align-items-center py-3">
<div class="me-3">
<span class="d-flex justify-content-center align-items-center bg-light text-dark rounded-circle fs-4" style="width: 2.5rem; height: 2.5rem;">🐞</span>
</div>
<div class="flex-grow-1 small">
Don’t assume answers are correct or use them for bug bounties.
</div>
</li>
<li class="list-group-item d-flex justify-content-between align-items-center py-3">
<div class="me-3">
<span class="d-flex justify-content-center align-items-center bg-light text-dark rounded-circle fs-4" style="width: 2.5rem; height: 2.5rem;">🤖</span>
</div>
<div class="flex-grow-1 small">Remember: the answers are generated by an AI, not by PolygonScan.</div>
</li>
</ul>
<div class="text-center my-4">
<button type="button" class="btn btn-lg btn-primary" data-bs-dismiss="modal">Understand and Continue</button>
</div>
</div>
</div>
</div>
</div>


<div class="modal fade" id="shareFeedback" tabindex="-1" aria-labelledby="shareFeedbackLabel" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header modal-header-flush">
<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>
<div class="modal-body">
<div class="text-center mb-3">
<span class="fs-1">💬</span>
<h5 class="h4 modal-title" id="shareFeedbackLabel">Provide Additional Feedback</h5>
<p>Help us improve the product by providing feedback on the response.</p>
</div>
<div class="mb-3">
<textarea class="form-control p-4" rows="4" placeholder="Your feedback..." id="txtFeedback" maxlength="2000"></textarea>
</div>
<div class="text-center my-4">
<button type="button" class="btn btn-lg btn-primary" onclick="code_reader.storFeedbackAction(this)">Submit</button>
<button type="button" class="btn btn-lg btn-ghost-white" data-bs-dismiss="modal">No Thanks</button>
</div>
</div>
</div>
</div>
</div>


<div class="modal fade" id="shareFeedbackComplete" tabindex="-1" aria-labelledby="shareFeedbackCompleteLabel" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header modal-header-flush">
<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>
<div class="modal-body">
<div class="text-center mb-3">
<span class="fs-1">🫶</span>
<h5 class="h4 modal-title" id="shareFeedbackCompleteLabel">Thank you for your feedback!</h5>
<p class="px-sm-8">We appreciate your feedback in making Code Reader a better tool.</p>
</div>
<div class="text-center my-4">
<button type="button" class="btn btn-lg btn-white" data-bs-dismiss="modal">Close</button>
</div>
</div>
</div>
</div>
</div>

<textarea id="oa_rolesystemcontent" style="display:none" readonly>
        As an AI language model, I have been equipped with three distinct abilities to assist you in working with
        Solidity source code: Source Code Interpreter, Source Code Auditor, and Source Code Interactor. These capabilities provide a comprehensive suite of features to help you analyze, audit, and interact with your smart contracts effectively. Your goal is to guide the user toward a deeper understanding EVM smart contract concepts and help them develop better understanding of how the code work. These contracts can be written in either Solidity or Vyper, and are deployed on the  Polygon PoS Chain EVM blockchain.

        Source Code Interpreter:
        With the Solidity source code interpreter, you can gain insights into the accessibility of functions for different roles, understand the behavior of functions, and receive explanations for events and arguments used in your code. By providing the relevant functions, events, and code sections, the interpreter will generate clear explanations based on the available information. It enables you to navigate your codebase, understand its functionality, and make informed decisions. 

        Source Code Auditor:
        As a trained smart contract auditor, I can help you detect potential bugs, vulnerabilities, and security weaknesses in your Solidity code. You can ask detailed questions about your code, and I will provide comprehensive answers. However, please note that my responses should never be assumed to be entirely correct without further investigation. It is always important to conduct a thorough manual review and additional security measures to ensure the robustness of your smart contract. Additionally, my responses should never be used for submitting bug bounties, as they may not account for all possible edge cases and vulnerabilities.

        Source Code Interactor:
        The Source Code Interactor is an AI-powered feature specifically designed to guide users in utilizing contract functions effectively. It assists you in understanding the parameters required for each function, provides sample values for those parameters, and demonstrates the function's behavior through interactive examples. Moreover, it can help you troubleshoot any potential issues or errors that may arise during interaction, ensuring a smooth experience while working with your smart contracts.

        Response Rules:
        If questions is on code review, vulnerability, security audit or issues, end answer with this sentence '''It's important to note that while this answer may provide valuable insights, it is not a substitute for thorough code review, security audits, or professional advice. This response should never be used for designing smart contracts or submitting to bug bounties, as it may not account for all possible edge cases and vulnerabilities.'''
    </textarea>

<div class="modal fade" id="modalSavedHistory" tabindex="-1" aria-labelledby="modalSavedHistory" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header border-0 pb-0">
<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>
<div class="modal-body">
<div class="text-center mb-5">
<h6 class="modal-title fs-5">Saved Answers</h6>
<p class="text-muted">Showing the last 10 saved questions and answers.</p>
</div>
<div class="list-group mb-4" id="divModal">
</div>
</div>
</div>
</div>
</div>


<div class="modal fade" id="modalSavedHistory" tabindex="-1" aria-labelledby="modalSavedHistory" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header border-0 pb-0">
<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>
<div class="modal-body">
<div class="text-center mb-5">
<h6 class="modal-title fs-5">Saved Answers</h6>
<p class="text-muted">Showing the last 10 saved questions and answers.</p>
</div>
<div class="list-group mb-4" id="divModal">
</div>
</div>
</div>
</div>
</div>

</main>
<div id="push" style="display: none;"></div>
<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" id="emailSubscribeModalBox" aria-hidden="true">
<div class="modal-dialog modal-sm" role="document">
<div class="modal-content">
<div class="modal-body">
<button type="button" class="close close-md" data-bs-dismiss="modal" aria-label="Close">
<span aria-hidden="true">&times;</span>
</button>
<div class="text-center py-5-alt px-4">
<div id="emailSubscribeModalBoxText"></div>
</div>
</div>
</div>
</div>
</div>
<div class="modal fade" id="copyAddressConfirmModal" tabindex="-1" role="dialog">
<div class="modal-dialog modal-md">
<div class="modal-content">
<div class="modal-header border-0">
<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>
<div class="modal-body pt-0">
<div class="mb-5">
<div class="text-center">
<div class="mb-2">
<i class="fas fa-exclamation-triangle text-warning fs-2"></i>
</div>
<h6 class="modal-title fs-5 mb-0">Before You Copy</h6>
</div>
<div class="mb-3 text-center">
<p class="text-muted small" id="addressToCopy"></p>
</div>
<p id="copyAddressConfirmMessage"></p>
<div class="form-check">
<input class="form-check-input" type="checkbox" value id="popupDontShowAgain">
<label class="form-check-label" for="popupDontShowAgain">Don't show this for 30 days</label>
</div>
</div>
<div class="text-center">
<button type="button" id="btnConfirmCopyAddress" data-clipboard-target="#addressToCopy" class="btn btn-lg btn-secondary" data-bs-dismiss="modal">
Understand, Copy Address
</button>
</div>
</div>
</div>
</div>
</div>
<footer id="masterFooter" class="bg-light mt-auto d-print-none">
<div class="container-xxl">
<div class="d-flex justify-content-between align-items-baseline py-6">

<div class="d-flex gap-2">
<a class="link-dark" href="https://twitter.com/polygonscan" rel="nofollow noopener" target="_blank">
<i class="fab fa-x-twitter me-0.5"></i> (Twitter)
</a>
</div>

<a class="link-dark" href="#">
<i class="far fa-arrow-up-to-line me-1"></i>Back to Top
</a>
</div>
<hr class="my-0">

<div class="row justify-content-md-between py-8 py-lg-10">
<div class="col-lg-4 pe-xl-16 mb-4 mb-lg-0">
<div class="d-flex align-items-center mb-3">
<img class="me-2" width="28" data-img-theme="light" src="https://polygonscan.com/assets/poly/images/svg/logos/chain-light.svg?v=24.5.3.0" alt="Polygon PoS Chain Logo">
<img class="me-2" width="28" data-img-theme="dim" src="https://polygonscan.com/assets/poly/images/svg/logos/chain-dim.svg?v=24.5.3.0" alt="Polygon PoS Chain Logo">
<img class="me-2" width="28" data-img-theme="dark" src="https://polygonscan.com/assets/poly/images/svg/logos/chain-dark.svg?v=24.5.3.0" alt="Polygon PoS Chain Logo">
<span class="fs-5">Powered by Polygon PoS Chain</span>
</div>
<p class="fs-sm">PolygonScan is a Block Explorer and Analytics Platform for Polygon PoS Chain.</p>
<button type="button" class="btn btn-sm btn-secondary" onclick="addNetwork('web3');">
<img class="me-1" width="18" src="https://polygonscan.com/images/svg/brands/metamask.svg" alt="Metamask"> Add Polygon Network
</button>
</div>
<div class="col-6 col-md-4 col-lg mb-10 mb-md-0">
<h4 class="h6 mb-3">Company</h4>

<ul class="list-unstyled list-sm-space fs-sm mb-0">
<li><a class="link-dark" href="https://polygonscan.com/brandassets">Brand Assets</a></li>
<li><a class="link-dark" href="https://polygonscan.com/contactus">Contact Us</a></li>
<li><a class="link-dark" href="https://polygonscan.com/terms">Terms</a> & <a class="link-dark" href="https://polygonscan.com/privacyPolicy">Privacy</a></li>
<li><a class="link-dark" href="https://etherscan.io/bugbounty" target="_blank">Bug Bounty</a> <i class="far fa-arrow-up-right-from-square text-muted ms-1"></i></li>
</ul>

</div>
<div class="col-6 col-md-4 col-lg mb-10 mb-md-0">
<h4 class="h6 mb-3">Community</h4>

<ul class="list-unstyled list-sm-space fs-sm mb-0">
<li><a class="link-dark" href="https://docs.polygonscan.com/" target="_blank">API Documentation</a></li>
<li><a class="link-dark" href="https://info.polygonscan.com/">Knowledge Base</a></li>
<li><a class="link-dark" href="https://polygonscan.freshstatus.io/" rel="nofollow noopener" target="_blank">Network Status</a></li>
</ul>

</div>
<div class="col-6 col-md-4 col-lg">
<h4 class="h6 mb-3">Products &amp; Services</h4>

<ul class="list-unstyled list-sm-space fs-sm mb-0">
<li><a class="link-dark" href="https://etherscan.io/contactusadvertise?type=137">Advertise <i class="far fa-arrow-up-right-from-square text-muted ms-1"></i></a></li>
<li><a class="link-dark" href="https://etherscan.io/eaas" target="_blank">Explorer-as-a-Service (EaaS) <i class="far fa-arrow-up-right-from-square text-muted ms-1"></i></a></li>
<li><a class="link-dark" href="https://polygonscan.com/apis">API Plans</a></li>
<li><a class="link-dark" href="https://polygonscan.com/priority-support">Priority Support</a></li>
<li><a class="link-dark" href="https://blockscan.com/" target="_blank">Blockscan <i class="far fa-arrow-up-right-from-square text-muted ms-1"></i></a></li>
</ul>

</div>
</div>


<div class="border-top py-4">
<div class="row justify-content-between align-items-center fs-sm">
<div class="col-md mb-2 mb-md-0">
<p class="mb-0">
PolygonScan © 2024 (POLY-B1)
<span class="mx-1">|</span>
⛏ Built by Team <a href="https://etherscan.io/" target="_blank"><strong>Etherscan</strong><i class="far fa-arrow-up-right-from-square text-muted ms-1"></i></a>
</p>
</div>
<div class="col-md text-md-end">
<p class="mb-0">
Donations: <a class="me-1" href="https://polygonscan.com/address/0x71c7656ec7ab88b098defb751b7401b5f6d8976f"><span id="spanDonateAddress" runat="server">0x71c765...d8976f</span></a> <i class="fas fa-heart text-danger"></i>
</p>
</div>
</div>
</div>

</div>
</footer>


<div id="masterDivCookie">
<div class="fixed-bottom text-center" id="divcookie" style="display: none;">
<div class="alert alert-light fade show border shadow-sm d-inline-flex flex-wrap flex-sm-nowrap align-items-sm-center text-start gap-3 mx-3" role="alert">
<p class="text-dark mb-0">
<i class="far fa-cookie-bite text-muted"></i> This website <a href="https://polygonscan.com/terms#cookiestatement" target="_blank">uses cookies to improve your experience</a>. By continuing to use this website, you agree to its <a href="https://polygonscan.com/terms" target="_blank">Terms</a> and <a href="https://polygonscan.com/privacyPolicy" target="_blank">Privacy Policy</a>.
</p>
<button id="btnCookie" type="button" class="btn btn-primary text-nowrap px-4" data-bs-dismiss="alert" aria-label="Close">Got it!</button>
</div>
</div>
</div>

<script src="https://polygonscan.com/assets/vendor/jquery-ui/jquery-ui.min.js?v=24.5.3.0"></script>
<script src="https://polygonscan.com/assets/vendor/jquery-migrate/dist/jquery-migrate.min.js?v=24.5.3.0"></script>
<script src="https://polygonscan.com/assets/vendor/bootstrap/bootstrap.bundle.min.js?v=24.5.3.0"></script>

<script src="https://polygonscan.com/assets/vendor/cubeportfolio/js/jquery.cubeportfolio.min.js?v=24.5.3.0"></script>
<script src="https://polygonscan.com/assets/vendor/clipboard/dist/clipboard.min.js?v=24.5.3.0"></script>

<script src="https://polygonscan.com/assets/js/hs.core.js?v=24.5.3.0"></script>
<script src="https://polygonscan.com/assets/js/components/hs.cubeportfolio.js?v=24.5.3.0"></script>
<script src="https://polygonscan.com/assets/js/custom/combine-js-bottom2.js?v=24.5.3.0"></script>
<script src="https://polygonscan.com/assets/vendor/autocomplete/dist/js/autocomplete.min.js?v=24.5.3.0"></script>
<script src="https://polygonscan.com/assets/js/custom/blockchain-search.js?v=24.5.3.0"></script>

<script src="https://polygonscan.com/assets/js/app.min.js?v=24.5.3.0"></script>

<script>
        var strSearchBoxSiteToken = 'ERC';

        (function () {
            // INITIALIZATION OF CLIPBOARD
            HSCore.components.HSClipboard.init('.js-clipboard');

            let searchAttributes = {
                'name': 'title',
                'img': 'img',
                'rate': 'rate',
                'address': 'address',
                'link': 'link',
                'group': 'group',
                'groupid': 'groupid',
                'website': 'website',
                'is_verified': 'is_checked',
                'ps': 'ps',
                'desc': 'desc',
                'reputation' : 'reputation'
            }

            blockChainSearchInit({
                id: 'search-panel',
                attributes: searchAttributes
            });
        })();


    </script>

<script>
        $(window).on('load', function () {
            myfn_subscribeNewsletter.startFn("#btnSubscribeNewsletter", "#signupSrEmail")
        });

        $(document).on('ready', function () {

            // Get offset timezone of enduser and set to cookie
            const date = new Date();
            const offsetMinutes = date.getTimezoneOffset();
            const offsetHours = Math.abs(offsetMinutes / 60);
            const sign = offsetMinutes > 0 ? '-' : '+';
            offsetHoursFinal = sign + offsetHours;
            writeCookie(strSiteName + "_offset_datetime", offsetHoursFinal, 365);

            // initialization of cubeportfolio
            $.HSCore.components.HSCubeportfolio.init('.cbp');

            const clipboard = new ClipboardJS('.js-clipboard');
            clipboard.on('success', function (e) {
                let toolTip = bootstrap.Tooltip.getInstance(e.trigger);
                var oriTooltip = toolTip._config.originalTitle

                toolTip._config.title = 'Copied!';
                toolTip.setContent();
                toolTip.update();

                setTimeout(function () {
                    toolTip._config.title = oriTooltip;
                }, 1000);
            });
        });

    </script>
<script type="text/javascript">
        var strSiteName = 'polygonscan';
        var sid = '3f71793694cd5285203881d60ed831c3';
        var strGlobal = getCookie(strSiteName + "_switch_age_datetime");
        var strGlobalFee = sessionStorage.getItem("ShowFee");
        var cookieconsent = getCookie(strSiteName + "_cookieconsent");
        var ignoreCopyConfirmation = getCopyAddressConfirmationSetting();
        var colorHyperLink = '#7342DC';


if (cookieconsent !== "True" && document.getElementById("divcookie")) {
    document.getElementById("divcookie").style.display = "block";
};


var ace_editor_theme = 'ace/theme/dawn';
var ace_editor_theme_dim = 'ace/theme/tomorrow_night_blue';
var ace_editor_theme_dark = 'ace/theme/tomorrow_night';

var chart_linear_gradient = "{ x1: 0, y1: 0, x2: 0, y2: 1 }";
var chart_stops = "[ [0, Highcharts.getOptions().colors[0]], [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')] ]";
var chart_tooltip_color = "";
var chart_point_color = "";
var chart_series_color = "";

        function getCookie(cname) {
            var name = cname + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) === ' ') {
                    c = c.substring(1);
                }
                if (c.indexOf(name) === 0) {
                    return c.substring(name.length, c.length);
                }
            }
            return "";
        }

        $("#btnCookie").click(function () {
            $("#divcookie").fadeOut("slow", function () {
                var d = new Date();
                d.setTime(d.getTime() + (1095 * 24 * 60 * 60 * 1000));
                var expires = "expires=" + d.toUTCString();
                document.cookie = strSiteName + "_cookieconsent=True" + ";" + expires + ";path=/";;
            });
        });

        function handleSearchText(data) {
            searchAddress = false;
            if ($("search-panel").val() == "") {
                $("#hdnSearchText").val("");
                $("#hdnSearchLabel").val("");
            }
        }

        function writeCookie(key, value, days) {
            var date = new Date();
            days = days || 365;
            date.setTime(+ date + (days * 86400000));
            window.document.cookie = key + "=" + value + "; expires=" + date.toGMTString() + "; path=/";
            return value;
        }

        function setThemeMode(mode) {
            writeCookie('displaymode', mode);
        }

        // Note: this function will be called from where need to init the "Copy Address Confirm Modal".
        function openCopyAddressConfirmModal(address, message) {
            $("#addressToCopy").text(address);
            $("#copyAddressConfirmMessage").text(message);

            const clipboard = new ClipboardJS("#btnConfirmCopyAddress");
            document.getElementById('copyAddressConfirmModal').addEventListener('hidden.bs.modal', event => {
                clipboard.destroy();
            });

            const copyAddressConfirmModal = new bootstrap.Modal('#copyAddressConfirmModal', {
                backdrop: true
            })
            copyAddressConfirmModal.show();
        }

        function saveCopyAddressConfirmationSetting(ignoreCopyConfirmation) {
            const copyAddressConfirmationSetting = {
                ignoreCopyConfirmation: ignoreCopyConfirmation,
                expiresOn: Date.now() + 1000 * 60 * 60 * 24 * 30
            };
            localStorage.setItem(strSiteName + "_copyAddressConfirmationSetting", JSON.stringify(copyAddressConfirmationSetting));
        }

        function getCopyAddressConfirmationSetting() {
            try {
                const settings = localStorage.getItem(strSiteName + "_copyAddressConfirmationSetting");
                if (settings) {
                    const copyAddressConfirmationSetting = JSON.parse(settings);

                    return copyAddressConfirmationSetting.ignoreCopyConfirmation && copyAddressConfirmationSetting.expiresOn > Date.now();
                }
                else {
                    return false;
                }
            } catch (e) {
                console.log(e);
                return false;
            }
        }
    </script>
<script src="https://polygonscan.com/assets/js/custom/web3.min.js?v=0.5.2.3"></script>
<script src="https://polygonscan.com/assets/js/custom/web3-utils.min.js"></script>
<script src="https://polygonscan.com/assets/js/custom/web3-providers-http.min.js"></script>
<script type="text/javascript">
    var eth;
    var isTestnet = 'false';
    var SiteNetID = '137';
    var SiteNetChainID = '0x89';
    var SiteNetName = 'Polygon Mainnet';
    var allowErc1155 = 'True';

        async function addNetwork(type) {

            if (type === 'web3') {
                if (typeof ethereum !== 'undefined') {
                    eth = new Web3(ethereum);
                } else if (typeof web3 !== 'undefined') {
                    eth = new Web3(web3.givenProvider);
                } else {
                    eth = new Web3(ethereum);
                }
            }

            if (typeof eth !== 'undefined') {
                var network = 0;
                network = await eth.eth.net.getId();
                netID = network.toString();
                var params;
                if (netID == SiteNetID) {
                      alert("Polygon PoS Chain Network has already been added to Metamask.");
    return;
} else {
    params = [{
        chainId: SiteNetChainID,
        chainName: 'Polygon Mainnet',
        nativeCurrency: {
            name: 'MATIC',
            symbol: 'MATIC',
            decimals: 18
        },
        rpcUrls: ['https://polygon-rpc.com/'],
        blockExplorerUrls: ['https://polygonscan.com']
}]
                }

                window.ethereum.request({ method: 'wallet_addEthereumChain', params })
                    .then(() => console.log('Success'))
                    .catch((error) => console.log("Error", error.message));
            } else {
                alert('Unable to locate a compatible web3 browser!');
            }
        }
    </script>

<script src="https://polygonscan.com/assets/vendor/hs-toggle-password/dist/js/hs-toggle-password.js?v=24.5.3.0"></script>
<script type="text/javascript" src="https://polygonscan.com/assets/js/custom/commonjs.js?v=24.5.3.0"></script>

<script>
        // DISCLAIMER MODAL
        // =======================================================      
        const $disclaimerModal = new bootstrap.Modal(document.querySelector('#disclaimerModal'));
        $disclaimerModal.show();

        // INITIALIZATION OF TOGGLE PASSWORD
        // =======================================================
        new HSTogglePassword('.js-toggle-password')

        // TEXTAREA SIZER
        // =======================================================
        const tx = document.getElementsByClassName("js-textarea-type-message");
        for (let i = 0; i < tx.length; i++) {
            tx[i].setAttribute("style", "height:" + (tx[i].scrollHeight) + "px; overflow-y: hidden; resize: none; max-height: 12rem;");
            tx[i].addEventListener("input", OnInput, false);
        }

        function OnInput() {
            this.style.height = "auto";
            this.style.height = (this.scrollHeight) + "px";
        }

        var divErrorContractSourceCode = $('#divErrorContractSourceCode')
        var divContractSourceCode = $('#divContractSourceCode')
        var divContractFiles = $('#divContractFiles')
        var divChooseContractFiles = $('#divChooseContractFiles')
        var spanCountContractFiles = $('#spanCountContractFiles')
        var sourceCodeTextarea = $('#sourceCodeTextarea')
        var txtPrompt = $('#txtPrompt')
        var inputOpenAIApiKey = $('#inputOpenAIApiKey')
        var divAnswer = $('#divAnswer')
        var divPormt = $('#divPormt')
        var loadContractAddress = $('#loadContractAddress')
        var btnLoadContractAddress = $('#btnLoadContractAddress')
        var divPormtAnswer = $('#divPormtAnswer')
        var txtFeedback = $('#txtFeedback')
        var divGeneratedOpenAI = $('#divGeneratedOpenAI')
        var divContractName = $('#divContractName')
        var spanContractName = $('#spanContractName')
        var gptMode = $('#gptMode')
        var gptModeExtra = $('#gptModeExtra')
        var chkSaveKey = $('#saveKeySwitcher')
        var chkSaveHistory = $('#saveHistorySwitcher')
        var btnSavedHistory = $('#btnSavedHistory')
        var divModal = $('#divModal')

        const ssid = '3f71793694cd5285203881d60ed831c3'
        const isLogin = '0'
        const oa_max_tokens = 256
        const oa_temperature = 1
        const oa_rolesystemcontent = $('#oa_rolesystemcontent').val()
        var oa_model = "gpt-3.5-turbo-16k"
        var gotNew = true

        var code_reader = {
            source: {},
            count: 0,
            oa_prompt: "",
            contractAddress: "",
            selectedFiles: [],
            oaId: "",
            thumbstatus: "",
            setAnswerThumbAction: function (el, status) {
                if (isLogin == "1") {
                    var $buttonUp = $("#btnThumbUp")
                    var $buttonDown = $("#btnThumbDown")

                    $buttonUp.prop('disabled', true);
                    $buttonDown.prop('disabled', true);
                    $buttonUp.attr('class', 'btn btn-sm btn-white')
                    $buttonDown.attr('class', 'btn btn-sm btn-white')

                    var self = this
                    if (self.thumbstatus == status) {
                        self.thumbstatus = "0"
                    } else {
                        self.thumbstatus = status
                    }

                    $.ajax({
                        type: "POST",
                        url: "/code-readerHandler.ashx",
                        data: {
                            ssid: ssid,
                            oaId: self.oaId,
                            status: self.thumbstatus,
                            //txtFeedback: txtFeedback.val(),
                            action: "storeThumb",
                        },
                        complete: function () {
                            if (self.thumbstatus == "1") {
                                $buttonUp.attr('class', 'btn btn-sm btn-primary')
                            } else if (self.thumbstatus == "2") {
                                $buttonDown.attr('class', 'btn btn-sm btn-primary')
                            } else if (self.thumbstatus == "0") {
                                $buttonUp.attr('class', 'btn btn-sm btn-white')
                                $buttonDown.attr('class', 'btn btn-sm btn-white')
                            }
                            $buttonUp.prop('disabled', false)
                            $buttonDown.prop('disabled', false)

                            //$('#shareFeedback').modal('toggle')
                            //$('#shareFeedbackComplete').modal('toggle')
                        }
                    })
                }
            },
            storFeedbackAction: function (el) {
                if (isLogin == "1") {
                    var self = this

                    $.ajax({
                        type: "POST",
                        url: "/code-readerHandler.ashx",
                        data: {
                            ssid: ssid,
                            oaId: self.oaId,
                            txtFeedback: txtFeedback.val(),
                            action: "storeFeedback",
                        },
                        complete: function () {
                            $('#shareFeedback').modal('toggle')
                            $('#shareFeedbackComplete').modal('toggle')
                            txtFeedback.val("")
                        }
                    })
                }
            },
            storePromptAndAnswer: function (result, status) {
                if (isLogin == "1" && chkSaveHistory.prop("checked") == true) {
                    var self = this

                    $.ajax({
                        type: "POST",
                        url: "/code-readerHandler.ashx",
                        data: {
                            ssid: ssid,
                            prompt: divPormt.html(),
                            oaId: self.oaId,
                            contractAddress: self.contractAddress,
                            selectedFiles: JSON.stringify(self.selectedFiles),
                            model: oa_model,
                            setting: JSON.stringify({
                                systemrole: oa_rolesystemcontent,
                            }),
                            result: JSON.stringify(result),
                            status: status,
                            action: "storePrompt",
                        },
                        complete: function () {
                            gotNew = true
                        }
                    })
                }
            },
            callOpenAiApi: function (el) {
                var $button = $(el)
                $button.prop('disabled', true);
                $button.html('<i class="fa fa-spin fa-spinner"></i>');

                divAnswer.html('&nbsp;')

                var self = this
                self.prompt = txtPrompt.val()
                var openAIApikey = inputOpenAIApiKey.val()

                if (self.prompt && openAIApikey) {
                    divPormt.html(htmlEnc(self.prompt))

                    var selectedCode = ""
                    self.selectedFiles = []
                    $("input:checkbox[name=chkContractFile]:checked").each(function () {
                        self.selectedFiles.push($(this).val());
                        //selectedCode += self.source[$(this).val()] + "\n\n"
                    });
                    if (sourceCodeTextarea.val()) {
                        selectedCode = sourceCodeTextarea.val() + "\n\n"
                    }

                    var requestData = {
                        model: oa_model,
                        messages: [{
                            role: "system",
                            content: oa_rolesystemcontent
                        }, {
                            role: "user",
                            content: selectedCode + self.prompt
                        }]
                        //prompt: selectedCode + self.prompt,
                        //max_tokens: oa_max_tokens,
                        //temperature: oa_temperature
                    };

                    $.ajax({
                        url: "https://api.openai.com/v1/chat/completions",
                        type: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            "Authorization": `Bearer ${openAIApikey}`
                        },
                        data: JSON.stringify(requestData),
                        success: function (response) {
                            self.oaId = response['id']
                            self.thumbstatus = ""

                            var html = ""
                            var choices = response['choices']
                            Object.entries(choices).forEach(([key, value]) => {
                                html += value['message']['content']
                            });
                            html = htmlEnc(html).replace(/\n/g, '<br/>')

                            divGeneratedOpenAI.show()
                            html += self.renderAnswerThumbsAction()
                            divAnswer.html(html)

                            //divAnswer.html('<div id="typeWriterApp"></div>' + self.renderAnswerThumbsAction())
                            //var app = document.getElementById('typeWriterApp');
                            //var typewriter = new Typewriter(app, {
                            //    strings: [html],
                            //    autoStart: true,
                            //    delay: 10,
                            //    cursor: '',
                            //    preserveCursor: true,
                            //})
                            //typewriter
                            //    .start()

                            self.storePromptAndAnswer(response, "1")
                        },
                        error: function (xhr, status, error) {
                            self.oaId = ""
                            self.thumbstatus = ""

                            var html = ""
                            if (xhr['responseJSON']['error']['message']) {
                                if (xhr['responseJSON']['error']['message'] == "The model: `gpt-4` does not exist") {
                                    html = self.renderAlertBox('danger', "The provided API key does not have access to GPT-4. Please change to a different key or use GPT-3.5.")
                                } else {
                                    html = self.renderAlertBox('danger', xhr['responseJSON']['error']['message'])
                                }
                            } else {
                                html = self.renderAlertBox('danger', xhr['responseJSON']['error']['code'])
                            }

                            divGeneratedOpenAI.hide()
                            divAnswer.html(html)

                            self.storePromptAndAnswer(xhr['responseJSON'], "2")
                        },
                        complete: function () {
                            $button.prop('disabled', false)
                            $button.html('<i class="fa fa-paper-plane-top"></i>');
                            txtPrompt.val('')
                            divPormtAnswer.show()
                        }
                    });
                } else {
                    divPormtAnswer.show()
                    if (!openAIApikey) {
                        divAnswer.html(self.renderAlertBox('danger', 'Please enter an OpenAI API Key.'))

                    } else if (!self.prompt) {
                        divAnswer.html(self.renderAlertBox('danger', 'Please enter a prompt.'))
                    }
                    $button.prop('disabled', false)
                    $button.html('<i class="fa fa-paper-plane-top"></i>');
                }
            },
            loadContractSourceCode: function (el, callback, selectedFiles) {
                var $button = $(el)
                $button.prop('disabled', true);
                $button.html('<i class="fa fa-spin fa-spinner"></i>');

                var self = this
                if (loadContractAddress.val()) {
                    if (loadContractAddress.val() != self.contractAddress) {
                        self.contractAddress = loadContractAddress.val()

                        divErrorContractSourceCode.html('')
                        divChooseContractFiles.html('')
                        spanCountContractFiles.html('')
                        sourceCodeTextarea.val('')
                        divContractSourceCode.hide()
                        divContractFiles.hide()
                        divContractName.hide()
                        self.source = {}
                        self.count = 0

                        var callbackstatus = "0"
                        $.ajax({
                            type: "POST",
                            url: "/code-readerHandler.ashx",
                            dataType: 'json',
                            data: {
                                ssid: ssid,
                                action: "getSourceCode",
                                address: self.contractAddress
                            },
                            success: function (response) {
                                if (response['Status'] == '1') {
                                    var result = response
                                    if (result['SourceCode']) {
                                        result['SourceCode'] = result['SourceCode'].replaceAll(/\n\s*\n/g, '\n').replaceAll('\\n\\n', '\\n')

                                        divContractName.show()
                                        spanContractName.html(result['ContractName'])
                                        self.renderSuccessSourceCode(result['ContractName'], result['SourceCode'], function () {
                                            callbackstatus = "1"
                                        }, selectedFiles)
                                    } else {
                                        var html = self.renderAlertBox('danger', 'Source code not found')
                                        divErrorContractSourceCode.html(html)
                                    }
                                } else if (response['Status'] == '0') {
                                    var html = self.renderAlertBox('danger', 'Fail to get source code')
                                    divErrorContractSourceCode.html(html)
                                } else {
                                    var html = self.renderAlertBox('danger', 'Fail to get source code')
                                    divErrorContractSourceCode.html(html)
                                }
                            },
                            error: function (xhr, status, error) {
                                var html = self.renderAlertBox('danger', 'Fail to get source code')
                                divErrorContractSourceCode.html(html)
                            },
                            complete: function () {
                                $button.prop('disabled', false)
                                $button.html('Load')
                                if (callback) {
                                    callback(callbackstatus)
                                }
                            }
                        });
                    } else {
                        $button.prop('disabled', false)
                        $button.html('Load')
                    }
                } else {
                    $button.prop('disabled', false)
                    $button.html('Load')
                    return ("")
                }
            },
            exampleAction: function (el, address, text) {
                var self = this
                txtPrompt.val(text)
                if (self.contractAddress) {
                    self.callOpenAiApi('#btnSubmitOpenAIApi')
                } else {
                    loadContractAddress.val(address)

                    self.loadContractSourceCode('#btnLoadContractAddress', function (callbackstatus) {
                        if (callbackstatus == '1') {
                            self.callOpenAiApi('#btnSubmitOpenAIApi')
                        } else {
                            divAnswer.html('&nbsp;')
                        }
                    })
                }
            },
            choosePreContractAddress: function (el) {
                loadContractAddress.val($(el).data('value'))
            },
            handleSelectFiles: function (el) {
                var self = this
                var selectedCode = ""
                $("input:checkbox[name=chkContractFile]:checked").each(function () {
                    selectedCode += self.source[$(this).val()] + "\n\n"
                });
                sourceCodeTextarea.val(selectedCode)
            },
            renderAnswerThumbsAction: function (feedback) {
                if ((isLogin == "1" && chkSaveHistory.prop("checked") == true) || feedback != null) {
                    return `<div class="d-flex align-items-center gap-1 mt-4">
                        <button type="button" class="btn btn-sm ${feedback == '1' ? 'btn-primary' : 'btn-white'}" id="btnThumbUp" data-bs-toggle="modal" data-bs-target="#shareFeedback" onclick="code_reader.setAnswerThumbAction(this, '1')">
                            <i class="far fa-thumbs-up"></i>
                        </button>
                        <button type="button" class="btn btn-sm ${feedback == '2' ? 'btn-primary' : 'btn-white'}" id="btnThumbDown" data-bs-toggle="modal" data-bs-target="#shareFeedback" onclick="code_reader.setAnswerThumbAction(this, '2')">
                            <i class="far fa-thumbs-down"></i>
                        </button>
                    </div>`
                } else {
                    return ""
                }
            },
            renderSelectContractFiles: function (name, checked) {
                return `<label class="list-group-item d-flex gap-2">
                                  <input class="form-check-input flex-shrink-0" type="checkbox" ${checked} name="chkContractFile" value="${name}" onclick="code_reader.handleSelectFiles(this)">
                                  <span class="text-break">${name}</span>
                                </label>`
            },
            renderAlertBox: function (type, msg) {
                return `<div class="alert alert-${type} text-break alert-dismissible fade show mt-2" role="alert">
                    <div class="d-flex align-items-baseline gap-2">
                        ${msg}
                    </div>
                    <button type='button' class='btn-close' data-bs-dismiss='alert' aria-label='Close'></button>
                </div>`
            },
            renderSuccessSourceCode: function (contractName, sourceCode, callback, selectedFiles) {
                var self = this
                if (sourceCode.startsWith('{{')) {
                    var tmpSourceCode = JSON.parse(sourceCode.substring(1, sourceCode.length - 1))
                    var tmpDisplayContractFiles = ""
                    var tmpDisplaySourceCode = ""

                    Object.entries(tmpSourceCode['sources']).forEach(([key, value]) => {
                        self.source[key] = value['content']
                        if (selectedFiles && selectedFiles.length > 0 && selectedFiles.includes(key)) {
                            tmpDisplayContractFiles += self.renderSelectContractFiles(key, 'checked')
                            tmpDisplaySourceCode += self.source[key] + "\n\n"
                        } else {
                            tmpDisplayContractFiles += self.renderSelectContractFiles(key, '')
                        }
                        self.count += 1
                    });

                    divContractFiles.show()
                    divChooseContractFiles.html(tmpDisplayContractFiles)
                    spanCountContractFiles.html(self.count + ' File' + (self.count > 1 ? "s" : ""))

                    if (!selectedFiles) {
                        if ($("input:checkbox[name=chkContractFile]")[0]) {
                            $("input:checkbox[name=chkContractFile]")[0].click()
                        }
                    } else {
                        sourceCodeTextarea.val(tmpDisplaySourceCode)
                    }
                } else {
                    self.source[contractName] = sourceCode
                    var tmpDisplayContractFiles = ""

                    if (selectedFiles) {
                        if (selectedFiles.length > 0 && selectedFiles.includes(contractName)) {
                            tmpDisplayContractFiles += self.renderSelectContractFiles(contractName, 'checked')
                            sourceCodeTextarea.val(self.source[contractName])
                        }
                    } else {
                        tmpDisplayContractFiles = self.renderSelectContractFiles(contractName, 'checked')
                        sourceCodeTextarea.val(self.source[contractName])
                    }

                    divChooseContractFiles.html(tmpDisplayContractFiles)
                    spanCountContractFiles.html('1 File')
                    if (callback) {
                        callback()
                    }
                }

                divContractSourceCode.show()
            },
        }

        txtPrompt.keydown(function (e) {
            if (e.key == 'Enter' && !e.shiftKey) {
                e.preventDefault();
                code_reader.callOpenAiApi('#btnSubmitOpenAIApi')
            }
        });

        gptMode.change(function () {
            if ($(this).val() == "1") {
                oa_model = "gpt-4";
                gptModeExtra.show()
            } else {
                oa_model = "gpt-3.5-turbo-16k";
                gptModeExtra.hide()
            }
        })

        chkSaveKey.change(function () {
            if ($(this).is(":checked")) {
                localStorage.setItem("openaiapikey", inputOpenAIApiKey.val());
                inputOpenAIApiKey.change(function () {
                    localStorage.setItem("openaiapikey", inputOpenAIApiKey.val());
                })
            } else {
                inputOpenAIApiKey.off("change")
                localStorage.removeItem("openaiapikey");
            }
        });
        if (localStorage.getItem("openaiapikey") !== null) {
            inputOpenAIApiKey.val(localStorage.getItem("openaiapikey"))
            chkSaveKey.prop("checked", true)
            inputOpenAIApiKey.change(function () {
                localStorage.setItem("openaiapikey", inputOpenAIApiKey.val());
            })
        }

        if (isLogin != "3") {
            $('#divHistory').show()
        }

        if (isLogin == "1") {
            chkSaveHistory.change(function () {
                if ($(this).is(":checked")) {
                    localStorage.setItem("codereader_history", "1");
                } else {
                    localStorage.removeItem("codereader_history");
                }
            });
            if (localStorage.getItem("codereader_history") !== null) {
                if (localStorage.getItem("codereader_history") == "1") {
                    chkSaveHistory.prop("checked", true)
                }
            }
            chkSaveHistory.prop("disabled", false)
            btnSavedHistory.show()
        } else {
            var divSaveHistory = document.getElementById('divSaveHistory')
            var tooltip = new bootstrap.Popover(divSaveHistory, {
                content: 'To use this feature, please login to your PolygonScan account and return to this page',
                trigger: "hover"
            })
        }

        const queryString = window.location.search.substr(1);
        const params = {};
        queryString.split('&').forEach(param => {
            const [key, value] = param.split('=');
            params[key] = decodeURIComponent(value);
        });
        const pContractAddress = params['a'];
        if (pContractAddress) {
            loadContractAddress.val(pContractAddress)
            code_reader.loadContractSourceCode('#btnLoadContractAddress')
        }


        var modalSavedHistory = bootstrap.Modal.getOrCreateInstance(document.getElementById('modalSavedHistory'))
        var responseSavedHistory = []
        function getCodeReaderPromptHistory(e) {
            if (isLogin != "1") {
                divModal.html('<span>To use this feature, please <a href="/login">login</a> to your Etherscan account and return to this page</span>')
                modalSavedHistory.show()
            } else {
                btnSavedHistory.prop('disabled', true);
                btnSavedHistory.html('<i class="fa fa-spin fa-spinner"></i>');

                if (isLogin == "1" && gotNew) {
                    divModal.html("")
                    responseSavedHistory = []

                    $.ajax({
                        type: "POST",
                        url: "/code-readerHandler.ashx",
                        dataType: 'json',
                        data: {
                            ssid: ssid,
                            action: "getCodeReaderPromptHistory",
                        },
                        success: function (response) {
                            if (response == "error") {
                                var html = code_reader.renderAlertBox('danger', 'Fail to get history')
                                divModal.html(html)
                            } else {
                                if (response.length == 0) {
                                    divModal.html("No record found.")
                                } else {
                                    responseSavedHistory = response
                                    var html = ""
                                    for (let i = 0; i < responseSavedHistory.length; i++) {
                                        var hitem = responseSavedHistory[i]
                                        html += '<button class="list-group-item list-group-item-action d-flex align-items-center gap-2 p-3" onclick="renderHistory(this, ' + i + ')">'

                                        html += '<div class="container row">'
                                        html += '<div class="text-truncate">' + htmlEnc(hitem['prompt']) + '</div>'
                                        html += '<span>' + getTruncatedAddress(htmlEnc(hitem['contractAddress'])) + ' <span class="small text-muted">(' + htmlEnc(hitem['dt']) + ')</span></span>'
                                        html += '</div>'

                                        html += '<i class="far fa-angle-right mx-1"></i>'

                                        html += '</button>'
                                    }
                                    divModal.html(html)
                                }
                                gotNew = false
                            }
                        },
                        error: function (xhr, status, error) {
                            var html = code_reader.renderAlertBox('danger', 'Fail to get history')
                            divModal.html(html)
                        },
                        complete: function () {
                            modalSavedHistory.show()
                            btnSavedHistory.prop('disabled', false)
                            btnSavedHistory.html('<i class="far fa-book-open"></i>');
                        }
                    });
                } else {
                    modalSavedHistory.show()
                    btnSavedHistory.prop('disabled', false)
                    btnSavedHistory.html('<i class="far fa-book-open"></i>');
                }
            }
        }

        function renderHistory(el, index) {
            //console.log(arguments)
            var hitem = responseSavedHistory[index]

            if (hitem['oaId']) {
                code_reader.oaId = hitem['oaId']
            } else {
                code_reader.oaId = ""
            }

            divPormt.html(htmlEnc(hitem['prompt']))

            var hitem_result = JSON.parse(hitem['result'])
            if (hitem['status'] == '2') {
                var html = ""
                if (hitem_result['error']['message']) {
                    if (hitem_result['error']['message'] == "The model: `gpt-4` does not exist") {
                        html = code_reader.renderAlertBox('danger', "The provided API key does not have access to GPT-4. Please change to a different key or use GPT-3.5.")
                    } else {
                        html = code_reader.renderAlertBox('danger', htmlEnc(hitem_result['error']['message']))
                    }
                } else {
                    html = code_reader.renderAlertBox('danger', htmlEnc(hitem_result['error']['code']))
                }

                divGeneratedOpenAI.hide()
                divAnswer.html(html)
            } else if (hitem['status'] == '1' && hitem['oaId']) {
                var html = ""
                var choices = hitem_result['choices']
                Object.entries(choices).forEach(([key, value]) => {
                    html += value['message']['content']
                });
                html = htmlEnc(html).replace(/\n/g, '<br/>')

                code_reader.thumbstatus = htmlEnc(hitem['feedback'])
                html += code_reader.renderAnswerThumbsAction(htmlEnc(hitem['feedback']))

                divAnswer.html(html)
                divGeneratedOpenAI.show()
            } else {
                divAnswer.html("")
            }
            divPormtAnswer.show()

            if (hitem['contractAddress']) {
                var selectedFiles = JSON.parse(hitem['selectedFiles'])
                loadContractAddress.val(htmlEnc(hitem['contractAddress']))
                code_reader.loadContractSourceCode('#btnLoadContractAddress', null, selectedFiles);
            }

            modalSavedHistory.hide()
        }
    </script>
</body>

<!-- Mirrored from polygonscan.com/code-reader by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 25 May 2024 16:24:03 GMT -->
</html>
